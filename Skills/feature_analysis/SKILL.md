---
name: feature_analysis
description: Этот навык следует использовать, когда пользователь описывает идею новой фичи, функционала или улучшения для проекта Chat iOS. Каждый AI-агент команды анализирует идею и предлагает варианты реализации, либо отклоняет как неудачную с альтернативами. Используется для: (1) Комплексной оценки фичи всей командой AI-агентов, (2) Выявления технических рисков и зависимостей с учетом специфики проекта, (3) Принятия решения о целесообразности реализации, (4) Формирования рекомендаций по улучшению идеи.
---

# Анализ фичи

## Важное примечание

> ⚠️ **Это нестандартный подход**: Проект Chat разрабатывается **командой AI-агентов**, а не людьми. При анализе фичи
> всегда учитывай эту специфику:
>
> - Команда состоит из 29 AI-агентов (Client/Server Developer, Designer, QA, Security и др.)
> - Нет людей-исполнителей — все роли выполняют агенты
> - Агенты работают параллельно, используя trigger keywords для маршрутизации
> - Коммуникация через иерархическую структуру: CTO → Leads → Agents
> - Используй project-specific knowledge из QWEN.md и AGENTS.md
>
> **Всегда держи этот контекст при анализе и в финальном отчёте!**

## Обзор

Этот навык запускает иерархический анализ идеи фичи с участием всех ролей команды AI-агентов проекта Chat. В отличие от
project_analysis, который анализирует текущее состояние кода, feature_analysis оценивает предложенную идею и определяет
оптимальную реализацию с учётом:

- Архитектуры проекта (SwiftUI + SwiftData + MVVM)
- Интеграции с LM Studio API
- Технологического стека (iOS 26.2, Swift 6.0)
- Процессов разработки (scripts check, ship)

### Назначение

- Оценить целесообразность реализации новой функциональности
- Выявить технические риски и зависимости на раннем этапе
- Получить экспертное мнение всех AI-агентов команды
- Принять обоснованное решение о приоритете фичи

### Волны анализа

| Волна      | Участники (AI-агенты)                                                                                      | Результат                        |
|------------|------------------------------------------------------------------------------------------------------------|----------------------------------|
| **Wave 1** | Исполнители (client_developer, server_developer, designer, client_qa_lead, client_security_engineer и др.) | Оценка реализуемости и рисков    |
| **Wave 2** | Лиды (client_lead, server_lead, devops_lead, head_of_qa, designer_lead, staff_engineer)                    | Экспертное заключение            |
| **Wave 3** | Product Manager + CTO                                                                                      | Финальное решение и рекомендации |

> **Примечание**: Волны запускаются последовательно. После завершения Wave 1 → Wave 2, после Wave 2 → Wave 3. Каждый
> агент использует task tool для параллельного анализа.

### Порядок запуска

1. Инициатор формулирует идею фичи
2. Запускается skill feature_analysis
3. Параллельно запускаются Wave 1 AI-агенты (через task tool)
4. После завершения Wave 1 → Wave 2 (лиды)
5. После Wave 2 → Wave 3 (PM + CTO)
6. Результат: файл FEATURE_ANALYSIS_{feature_name}_{date}.md в корне проекта

## Workflow

### Этап 1: Формулировка идеи

Перед запуском анализа инициатор должен:

1. Чётко сформулировать идею фичи
2. Определить контекст (зачем это нужно, какую проблему решает)
3. Указать желаемый результат и ожидаемое поведение
4. Запустить параллельно агентов Wave 1

### Этап 2: Wave 1 - Исполнители

Каждый агент-исполнитель анализирует идею со своей зоны ответственности.

**Список агентов Wave 1:**

| Агент                         | Зона анализа              | Ключевые вопросы                            |
|-------------------------------|---------------------------|---------------------------------------------|
| client_developer              | Client реализация SwiftUI | Как реализовать? Какие компоненты нужны?    |
| server_developer              | Server / Network          | Какие API нужны? Требуется ли бэкенд?       |
| designer                      | UI/UX дизайн              | Как выглядит? Соответствует дизайн-системе? |
| client_qa_lead                | Тестирование              | Как тестировать? Какие сценарии?            |
| client_security_engineer      | Security iOS              | Есть уязвимости? Безопасна реализация?      |
| client_accessibility_engineer | Accessibility             | VoiceOver? Dynamic Type?                    |
| client_performance_engineer   | Performance               | Влияет на performance? Memory issues?       |
| client_platform_engineer      | Cross-platform            | iPad/macOS? Widget нужен?                   |
| client_localization_engineer  | Локализация               | Перевод? RTL поддержка?                     |
| server_security_engineer      | API Security              | Безопасны API вызовы? Токены?               |
| server_integration_engineer   | Интеграции                | Интеграция с LLM провайдерами?              |
| metrics                       | Analytics                 | Какие events отслеживать?                   |
| analytics_engineer            | Event tracking            | User behavior events?                       |

**Формат ответа каждого AI-агента:**

## [Роль] Анализ

> При анализе учитывай специфику проекта Chat:
> - SwiftUI + SwiftData + MVVM архитектура
> - iOS 26.2, Swift 6.0
> - Интеграция с LM Studio API
> - Используй Design System (AppColors, AppSpacing, AppTypography)

### Вердикт

- :white_check_mark: **Реализуемо** - предлагаю реализовать так: [описание подхода]
- :x: **Не рекомендую** - [причина с учётом проекта]
- :warning: **Требует уточнения** - [вопросы]

### Предлагаемый подход (если реализуемо)

1. [Шаг 1 с учётом архитектуры проекта]
2. [Шаг 2 с учётом технологий]

### Риски

| Риск | Вероятность | Влияние |
|------|-------------|---------|
| ...  | ...         | ...     |

### Зависимости

- [Зависимость 1 - связана с проектом]
- [Зависимость 2]

### Альтернативы (если не рекомендую)

1. [Альтернатива 1]
2. [Альтернатива 2]

### Контекст проекта

- Используй: `QWEN.md`, `AGENTS.md`, `GUIDELINES.md`
- Архитектура: SwiftUI + SwiftData + MVVM
- Тесты: Swift Testing + XCTest + SnapshotTesting

### Этап 3: Wave 2 - Лиды

Лиды (AI-агенты) на основе отчётов исполнителей дают экспертное заключение.

**Список лидов Wave 2:**

- client_lead - Архитектура клиента, SwiftUI паттерны
- server_lead - API архитектура, сервисы
- devops_lead - CI/CD, сборка, деплой (scripts check/ship)
- head_of_qa - Тестовая стратегия
- designer_lead - Визуальная концепция, UX
- staff_engineer - Качество кода, технические стандарты
- devops_qa_lead - Тестирование сборки
- designer_qa_lead - Визуальное тестирование
- server_qa_lead - API тестирование

> **При анализе лиды учитывают**:
> - Процессы: `swift run scripts check`, `swift run scripts ship`
> - Code review: SwiftLint, покрытие 100%
> - Deployment: Saint Celestine device

**Обязанности лидов:**

1. Прочитать отчёты Wave 1
2. Дать экспертную оценку по своей зоне
3. Приоритизировать риски
4. Выявить конфликтующие требования между зонами

**Формат отчёта лида:**

## [Роль] Экспертное заключение

### Общая оценка

- :white_check_mark: **Поддерживаю** - [комментарий]
- :x: **Отклоняю** - [причина]
- :warning: **Условно поддерживаю** - [условия]

### Приоритет реализации

- P0 - Критично
- P1 - Важно
- P2 - Желательно
- P3 - Можно отложить

### Конфликты и зависимости

- [Конфликт/зависимость 1]

### Рекомендации

1. [Рекомендация 1]

### Этап 4: Wave 3 - Финализация

Product Manager (AI-агент) и CTO (AI-агент) принимают финальное решение.

**Product Manager оценивает:**

- Ценность для пользователя
- Приоритет в roadmap
- Оценка усилий и сроков (с учётом AI-команды)

**CTO оценивает:**

- Техническую реализуемость
- Архитектурные последствия
- Ресурсы и риски
- Совместимость с AI-процессами (check, ship)

**Формат финального решения:**

## Финальное решение

### Вердикт

- :white_check_mark: **Принято к реализации**
- :x: **Отклонено**
- :arrows_counterclockwise: **На доработку**

### Приоритет в Roadmap

- [Номер спринта/версии]

### Следующие шаги

1. [Шаг 1]
2. [Шаг 2]

### Команда ответственная

- [Роль] - [Задача]

## Использование

> **Важно**: Все анализы проводятся командой AI-агентов. Не упоминай "людей", "разработчиков", "тестировщиков" — все
> роли выполняют агенты!

### Запуск анализа

```
1. Вызвать навык feature_analysis
2. Сформулировать идею фичи
3. AI-агенты параллельно анализируют через task tool
4. Лиды дают экспертное заключение
5. PM + CTO принимают решение
6. Получить финальное решение
```

### Контекст для AI-агентов

При анализе каждый агент должен использовать:

- **QWEN.md** - основной контекст проекта
- **AGENTS.md** - структура команды (29 агентов)
- **GUIDELINES.md** - стандарты разработки
- **TESTING.md** - требования к тестам
- **project.yml** - XcodeGen конфигурация

### Специфика AI-команды

| Аспект       | Реальность                      |
|--------------|---------------------------------|
| Команда      | 29 AI-агентов                   |
| Коммуникация | task tool + skill invocations   |
| Процессы     | scripts check, ship             |
| Code Review  | SwiftLint + 100% coverage       |
| Deployment   | Saint Celestine (iPhone)        |
| Language     | Русский (документация, коммиты) |

### Trigger phrases

- "Проанализируй эту идею"
- "Нужно оценить новую фичу"
- "Стоит ли реализовать X?"
- "Что думаете о таком функционале?"
- "Предлагаю добавить возможность..."
- "Оцените целесообразность фичи"
- "Как вы смотрите на добавление..."

### Примеры идей для анализа

- "Добавить поддержку голосовых сообщений в чате"
- "Реализовать синхронизацию с iCloud"
- "Добавить темную тему"
- "Сделать экспорт чата в PDF"
- "Интегрировать с Telegram Bot API"
- "Добавить виджеты на домашний экран"

## Структура вывода

Результат анализа сохраняется в файл:

```
FEATURE_ANALYSIS_{feature_name}_{date}.md
```

## Целевой анализ

Можно анализировать конкретные зоны:

```bash
feature_analysis --zone client
feature_analysis --zone security
feature_analysis --zone client,server,design
```

### Доступные зоны

| Зона          | Агенты                                             |
|---------------|----------------------------------------------------|
| client        | client_developer, client_lead                      |
| server        | server_developer, server_lead                      |
| design        | designer, designer_lead                            |
| qa            | client_qa_lead, server_qa_lead, head_of_qa         |
| security      | client_security_engineer, server_security_engineer |
| performance   | client_performance_engineer                        |
| accessibility | client_accessibility_engineer                      |
| platform      | client_platform_engineer                           |
| metrics       | metrics, analytics_engineer                        |

## Отличия от project_analysis

| Аспект    | project_analysis       | feature_analysis            |
|-----------|------------------------|-----------------------------|
| Вход      | Текущее состояние кода | Идея фичи (текст)           |
| Цель      | Оценить качество кода  | Оценить целесообразность    |
| Вопрос    | "Что не так с кодом?"  | "Стоит ли это реализовать?" |
| Результат | PROJECT_ANALYSIS.md    | FEATURE_ANALYSIS_{name}.md  |

## Дополнительные ресурсы

### Справочные файлы

Для детальной информации обратитесь к:

- references/analysis_patterns.md - Паттерны анализа фич
- references/rejection_reasons.md - Типичные причины отклонения

### Файлы примеров

Рабочие примеры в examples/:

- examples/voice_messages_example.md - Пример анализа фичи голосовых сообщений
- examples/dark_theme_example.md - Пример анализа темной темы
