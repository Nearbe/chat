{
  "rules": [
    {
      "id": "swift-style",
      "name": "Swift Style Conventions",
      "pattern": "**/*.swift",
      "instructions": "Follow these Swift conventions:\n- Maximum 160 characters per line\n- Use camelCase for variables and functions\n- Use PascalCase for types and enums\n- All ViewModels must have @MainActor attribute\n- Use AppColors, AppSpacing, AppTypography from Design system\n- Add Russian Docstrings for all public APIs\n- Prefer struct over class when possible\n- Avoid force unwrap (!), use guard let and if let"
    },
    {
      "id": "architecture",
      "name": "MVVM Architecture",
      "pattern": "**/*.swift",
      "instructions": "Follow MVVM architecture:\n- Keep business logic in ViewModels, not in Views\n- Use @Injected from Factory for dependency injection\n- Services should conform to protocols\n- SwiftData models use @Model attribute\n- Relationships use @Relationship with cascade delete\n- Use mainContext for UI operations"
    },
    {
      "id": "error-handling",
      "name": "Error Handling",
      "pattern": "**/*.swift",
      "instructions": "Error handling best practices:\n- Use throws instead of optional returns for errors\n- Create custom Error enums conforming to LocalizedError\n- Never hardcode API keys or secrets\n- Store secrets in Keychain only\n- Log errors without exposing sensitive data"
    },
    {
      "id": "testing",
      "name": "Testing Requirements",
      "pattern": "**/*Tests.swift",
      "instructions": "Testing standards:\n- Use Swift Testing framework with @Suite and @Test\n- Follow AAA pattern (Arrange, Act, Assert)\n- Use #expect for assertions\n- Mock external dependencies via protocols\n- Name tests: Method_Scenario_ExpectedResult"
    },
    {
      "id": "swiftui",
      "name": "SwiftUI Patterns",
      "pattern": "**/*View.swift",
      "instructions": "SwiftUI best practices:\n- Use @State, @Binding, @StateObject, @ObservedObject correctly\n- Never use .padding(16), use .padding(AppSpacing.medium)\n- Never use Color.primary, use AppColors.primary\n- Order modifiers: frame → padding → background → foreground → cornerRadius\n- Use LazyVStack/LazyHStack for long lists"
    },
    {
      "id": "security",
      "name": "Security",
      "pattern": "**/*.swift",
      "instructions": "Security rules:\n- NEVER hardcode API keys, tokens, or passwords\n- Use KeychainHelper for storing secrets\n- Use kSecAttrAccessibleWhenUnlockedThisDeviceOnly\n- Don't log sensitive data\n- Use https for all network requests"
    },
    {
      "id": "concurrency",
      "name": "Concurrency",
      "pattern": "**/*.swift",
      "instructions": "Swift Concurrency:\n- Use async/await instead of completion handlers\n- Avoid @escaping closures when possible\n- Use AsyncThrowingStream for streaming\n- Mark all ViewModels and UI-bound services @MainActor\n- Use Task for background operations"
    },
    {
      "id": "git-commits",
      "name": "Git Commit Messages",
      "pattern": ".git/**",
      "instructions": "Git conventions:\n- Use Russian language for commit messages\n- Format: <type>(<module>): <description>\n- Types: feat, fix, refactor, docs, test, chore\n- All changes in one branch = one commit (use amend)\n- Force push with --force-with-lease only"
    }
  ]
}
