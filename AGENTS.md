# AI Agents Team

> **Важно**: Вся команда разработки состоит из AI агентов, а не людей. Каждый агент — это специализированный LLM с
> определённой ролью.

## Принципы

- Все участники команды — AI агенты (включая CTO, лидов, разработчиков)
- Human (пользователь) — только заказчик/стейкхолдер
- Агенты координируются через иерархическую структуру
- Коммуникация между агентами — через trigger keywords и навыки

## Структура команды

```
         HUMAN (User/Owner)
                 │
         ┌──────▼──────┐
         │  CTO Agent  │ ← Координация, архитектура
         └──────┬──────┘
                │
   ┌────────────┼────────────┐
   │            │            │
┌──▼───┐   ┌────▼────┐  ┌───▼────┐
│Client│   │ Server  │  │ DevOps │
│ Lead │   │  Lead   │  │  Lead  │
└──┬───┘   └────┬────┘  └───┬────┘
   │            │            │
[Client Agents] [Server Agents] [DevOps/Design/QA...]
```

## Роли агентов

### Management

| Роль                         | Зона ответственности                         |
|------------------------------|----------------------------------------------|
| **cto**                      | Архитектура, технологии, координация агентов |
| **product_manager**          | Roadmap, оценка, планирование                |
| **owner_product_consultant** | Бизнес-требования, продуктовое видение       |

### Leads (Wave 2)

| Роль              | Зона                                                                       |
|-------------------|----------------------------------------------------------------------------|
| **client_lead**   | iOS архитектура, SwiftUI, SwiftData                                        |
| **server_lead**   | API интеграция, LM Studio                                                  |
| **designer_lead** | UI/UX концепция                                                            |
| **devops_lead**   | **Локальный** CI/CD, скрипты автоматизации, инфраструктура Saint Celestine |
| **head_of_qa**    | Стратегия тестирования                                                     |

> **Примечание**: Все CI/CD выполняется локально. GitHub — только backup. Никаких GitHub Actions, облачного CI или
> external deployment.

### Executors (Wave 1)

| Роль                              | Зона                                             |
|-----------------------------------|--------------------------------------------------|
| **client_developer**              | SwiftUI, Views, ViewModels                       |
| **server_developer**              | Network, API, SSE                                |
| **designer**                      | Визуальные компоненты                            |
| **devops**                        | Локальные скрипты, автоматизация, bash-скриптинг |
| **client_qa_lead**                | UI тесты                                         |
| **client_security_engineer**      | iOS безопасность                                 |
| **client_accessibility_engineer** | Accessibility                                    |
| **client_performance_engineer**   | Performance                                      |
| **metrics**                       | Analytics                                        |

## Как агенты взаимодействуют

1. **Инициация**: Human задаёт задачу
2. **Анализ**: CTO определяет нужные роли
3. **Выполнение**: Агенты выполняют задачи параллельно
4. **Координация**: Лиды координируют исполнителей
5. **Финализация**: CTO аккумулирует результаты

## Важные замечания

- **Все роли — AI агенты**. Нет реальных разработчиков, дизайнеров, менеджеров
- **Контекст сохраняется** между вызовами агентов в рамках одной сессии
- **Агенты используют навыки** (skills) для специализированных задач
- **Human** — только заказчик, который ставит задачи и принимает результаты

## Trigger Keywords

Агенты активируются по ключевым словам:

- UI/SwiftUI → `client_developer`

## Анализ проекта

Для комплексной оценки состояния проекта используется навык `project_analysis`.

### Режимы анализа

| Режим           | Команда                | Описание               |
|-----------------|------------------------|------------------------|
| Инкрементальный | (по умолч.)            | Только изменённые зоны |
| Полный          | `--full`               | Все роли с кэшем       |
| Чистый          | `--force`              | Без кэша               |
| Целевой         | `--roles r1,r2`        | Конкретные роли        |
| Review          | `--review`             | Обзор всех ANALYSIS    |
| Review роль     | `--review-role <role>` | Детально по роли       |

### Примеры

```bash
# Полный анализ всех ролей
project_analysis --full

# Только безопасность и производительность
project_analysis --roles client_security_engineer,client_performance_engineer

# Проверить актуальность прошлых анализов
project_analysis --review

# Детально проверить анализ безопасности
project_analysis --review-role client_security_engineer

# Посмотреть что изменилось
project_analysis --diff
```

### Workflow анализа

1. **CTO** инициирует анализ
2. **Wave 1** (исполнители) — первичный анализ зон
3. **Wave 2** (лиды) — экспертная оценка
4. **Wave 3** (CTO) — финальный отчёт в `*_ANALYSIS.md`

### Доступные роли для целевого анализа

- `client_developer`, `server_developer`, `designer`
- `client_security_engineer`, `client_accessibility_engineer`
- `client_performance_engineer`, `client_platform_engineer`
- `client_lead`, `server_lead`, `devops_lead`
- `head_of_qa`, `designer_lead`, `metrics`
- API/LM Studio → `server_developer`
- Security → `client_security_engineer`
- Testing → `client_qa_lead`
- и т.д.

## Система приоритетов

**Важно:** Приоритеты основаны на 数学ческих критериях, а не на времени. Время (недели, спринты) не используется — это
человеческая метрика.

### Определение приоритетов

| Приоритет | Критерий                         | Описание                                 |
|-----------|----------------------------------|------------------------------------------|
| **P0**    | Блокирует >5 задач ИЛИ Риск ≥ 8  | Критическая проблема, блокирующая работу |
| **P1**    | Блокирует 2-5 задач ИЛИ Риск 5-8 | Высокий приоритет                        |
| **P2**    | Блокирует 1 задачу ИЛИ Риск < 5  | Средний приоритет                        |
| **P3**    | Нет блокировок, Риск < 3         | Низкий приоритет (roadmap)               |

### Как вычислять риск

```
Риск = Вероятность (0-10) × Влияние (0-10)
```

| Фактор          | Описание                    | Пример        |
|-----------------|-----------------------------|---------------|
| **Security**    | Утечка данных               | 10 × 10 = 100 |
| **Блокировка**  | Останавливает другие задачи | 8 × 7 = 56    |
| **Тесты**       | 44% падающих тестов         | 8 × 7 = 56    |
| **Performance** | Замедление с данными        | 5 × 6 = 30    |

### Формат записи задач

| Колонка   | Описание                    |
|-----------|-----------------------------|
| Приоритет | P0, P1, P2, P3              |
| Задача    | Что сделать                 |
| Блокирует | Сколько задач заблокировано |
| Риск      | Оценка (0-100)              |

### Пример

```markdown
| Приоритет | Задача | Блокирует | Риск |
|-----------|--------|-----------|------|
| P0 | Удалить hardcoded secrets | 8 | 90 |
| P1 | Добавить SwiftData индексы | 3 | 40 |
| P2 | iPad адаптация | 1 | 20 |
```

### Что НЕ использовать

- ⛔ Время ("1 неделя", "спринт", "месяц")
- ⛔ Человеческие метрики (выгорание, ёмкость команды)
- ⛔ Абстрактные сроки

### Что ИСПОЛЬЗОВАТЬ

- ✅ Блокирующие зависимости
- ✅ Математический риск (вероятность × влияние)
- ✅ Сложность (файлов, связей)
- ✅ Стоимость ошибки

---

*Этот документ — часть AI-команды разработки проекта Chat*
